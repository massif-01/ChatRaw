:root{--background:0 0% 100%;--foreground:0 0% 0%;--card:0 0% 97.6%;--card-foreground:0 0% 0%;--popover:0 0% 100%;--popover-foreground:0 0% 0%;--muted:0 0% 94.1%;--muted-foreground:0 0% 40%;--accent:0 0% 95.3%;--accent-foreground:0 0% 0%;--destructive:0 84.2% 60.2%;--destructive-foreground:0 0% 100%;--success:142.1 76.2% 36.3%;--success-foreground:0 0% 100%;--border:0 0% 89.8%;--input:0 0% 89.8%;--ring:0 0% 0%;--bg-primary:hsl(var(--background));--bg-secondary:#f9f9f9;--bg-tertiary:hsl(var(--muted));--bg-hover:hsl(var(--accent));--bg-input:hsl(var(--background));--bg-modal:hsl(var(--background));--text-primary:hsl(var(--foreground));--text-secondary:hsl(var(--muted-foreground));--text-muted:#6b6b6b;--border-color:hsl(var(--border));--border-focus:hsl(var(--foreground));--accent-color:hsl(var(--foreground));--accent-hover:#333;--on-accent:hsl(var(--background));--success-color:hsl(var(--success));--error-color:hsl(var(--destructive));--error-foreground:hsl(var(--destructive-foreground));--success-foreground:hsl(var(--success-foreground));--shadow-sm:0 1px 2px rgba(0,0,0,.04);--shadow-md:0 4px 6px -1px rgba(0,0,0,.08);--shadow-lg:0 20px 40px -10px rgba(0,0,0,.1);--radius-sm:6px;--radius-md:12px;--radius-lg:16px;--radius-full:9999px;--spacing-1:4px;--spacing-2:8px;--spacing-3:12px;--spacing-4:16px;--spacing-5:20px;--spacing-6:24px;--spacing-8:32px;--spacing-10:40px;--spacing-12:48px;--text-xs:0.75rem;--text-sm:0.875rem;--text-base:1rem;--text-lg:1.125rem;--text-xl:1.25rem;--text-2xl:1.5rem;--text-3xl:1.875rem;--font-main:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji";--font-mono:ui-monospace,"SF Mono","Cascadia Code","Roboto Mono",Menlo,Monaco,"Courier New",monospace;--ease:cubic-bezier(0.16,1,0.3,1);--duration-fast:150ms;--duration-normal:200ms;--duration-slow:300ms;--transition-colors:color var(--duration-fast) var(--ease),background-color var(--duration-fast) var(--ease),border-color var(--duration-fast) var(--ease);--transition-transform:transform var(--duration-normal) var(--ease);--transition:all var(--duration-normal) var(--ease)}[data-theme=dark]{--background:0 0% 0%;--foreground:0 0% 100%;--card:0 0% 3.9%;--card-foreground:0 0% 100%;--popover:0 0% 3.9%;--popover-foreground:0 0% 100%;--muted:0 0% 8.6%;--muted-foreground:0 0% 62.7%;--accent:0 0% 10.2%;--accent-foreground:0 0% 100%;--border:0 0% 15.7%;--input:0 0% 15.7%;--ring:0 0% 100%;--bg-primary:hsl(var(--background));--bg-secondary:#0a0a0a;--bg-tertiary:hsl(var(--muted));--bg-hover:hsl(var(--accent));--bg-input:#0a0a0a;--bg-modal:#0a0a0a;--text-primary:hsl(var(--foreground));--text-secondary:hsl(var(--muted-foreground));--text-muted:#737373;--border-color:hsl(var(--border));--border-focus:hsl(var(--foreground));--accent-color:hsl(var(--foreground));--accent-hover:#e0e0e0;--on-accent:hsl(var(--background));--shadow-sm:0 1px 2px rgba(0,0,0,.3);--shadow-md:0 4px 6px -1px rgba(0,0,0,.4);--shadow-lg:0 20px 40px -10px rgba(0,0,0,.7)}*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}html{height:100dvh}body,html{height:100%;overflow:hidden}body{background:var(--bg-primary);color:var(--text-primary);display:flex;font-family:var(--font-main);font-size:15px;height:-webkit-fill-available;height:100dvh;line-height:1.6;-webkit-font-smoothing:antialiased;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);padding-top:env(safe-area-inset-top)}[x-cloak]{display:none!important}:focus-visible{outline:2px solid var(--border-focus);outline-offset:2px}[role=switch]:focus:not(:focus-visible),button:focus:not(:focus-visible),input:focus:not(:focus-visible),select:focus:not(:focus-visible),textarea:focus:not(:focus-visible){outline:none}@media (prefers-reduced-motion:reduce){*,:after,:before{animation-duration:.01ms!important;animation-iteration-count:1!important;scroll-behavior:auto!important;transition-duration:.01ms!important}}.sidebar{background:var(--bg-secondary);border-right:1px solid var(--border-color);display:flex;flex-direction:column;flex-shrink:0;height:100%;min-width:280px;position:relative;transition:width .3s cubic-bezier(.16,1,.3,1),transform .3s cubic-bezier(.16,1,.3,1);width:280px;z-index:10}.sidebar.collapsed{min-width:72px;width:72px}.sidebar-overlay{display:none}.sidebar-header{height:80px;justify-content:space-between;padding:20px 24px}.logo,.sidebar-header{align-items:center;display:flex}.logo{flex-wrap:nowrap;gap:12px;min-width:0}.logo-img{background:var(--bg-tertiary);border-radius:var(--radius-sm);flex-shrink:0;height:32px;min-width:32px;object-fit:cover;width:32px}.logo-text{color:var(--text-primary);font-size:1.15rem;font-weight:700;letter-spacing:-.02em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-icon{align-items:center;background:transparent;border:none;border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;display:flex;height:36px;justify-content:center;transition:var(--transition-colors);width:36px}.btn-icon:hover{background:var(--bg-hover);color:var(--text-primary)}.btn-icon-danger:hover{background:rgba(239,68,68,.1);color:var(--error-color)}.btn-new-chat{align-items:center;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-sm);box-shadow:var(--shadow-sm);color:var(--text-primary);cursor:pointer;display:flex;font-size:.95rem;font-weight:600;gap:10px;justify-content:center;margin:0 20px 20px;padding:12px;transition:var(--transition)}.btn-new-chat:hover{border-color:var(--border-focus);box-shadow:var(--shadow-md);transform:translateY(-1px)}.btn-clear-all{align-items:center;background:transparent;border:1px solid var(--border-color);border-radius:var(--radius-sm);color:var(--text-muted);cursor:pointer;display:flex;font-size:.85rem;gap:8px;justify-content:center;margin:10px 20px;padding:8px 12px;transition:var(--transition)}.btn-clear-all:hover{background:rgba(239,68,68,.1);border-color:var(--error-color);color:var(--error-color)}.btn-new-chat:active{transform:translateY(0)}.btn-new-chat-collapsed{align-items:center;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:50%;color:var(--text-primary);cursor:pointer;display:flex;height:44px;justify-content:center;margin:0 auto 20px;transition:var(--transition);width:44px}.btn-new-chat-collapsed:hover{border-color:var(--text-primary)}.chat-list{flex:1;overflow-x:hidden;overflow-y:auto;padding:0 12px;-webkit-overflow-scrolling:touch;min-height:0;overscroll-behavior:contain}.chat-list::-webkit-scrollbar{width:6px}.chat-list::-webkit-scrollbar-thumb{background:transparent;border-radius:6px}.chat-list:hover::-webkit-scrollbar-thumb{background:var(--border-color)}.chat-item{align-items:center;border:1px solid transparent;border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;display:flex;gap:12px;margin-bottom:4px;padding:12px 14px;position:relative;transition:var(--transition-colors)}.chat-item.active,.chat-item:hover{background:var(--bg-hover);color:var(--text-primary)}.chat-item.active{border-color:var(--border-color);font-weight:500}.chat-title{flex:1;font-size:.9rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-delete{background:transparent;border:none;border-radius:var(--radius-sm);color:var(--text-muted);cursor:pointer;opacity:0;padding:4px;transition:var(--transition)}.chat-item:hover .btn-delete{opacity:1}.btn-delete:hover{background:rgba(239,68,68,.1);color:var(--error-color)}.sidebar-footer{border-top:1px solid var(--border-color);padding:20px}.btn-settings{align-items:center;background:transparent;border:none;border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;display:flex;font-size:.95rem;font-weight:500;gap:12px;padding:12px;transition:var(--transition-colors);width:100%}.btn-settings:hover{background:var(--bg-hover);color:var(--text-primary)}.sidebar-settings-collapsed{bottom:24px;left:50%;position:absolute;transform:translateX(-50%)}.main-content{background:var(--bg-primary);height:100%}.chat-container,.main-content{display:flex;flex:1;flex-direction:column;min-height:0;overflow:hidden;position:relative;width:100%}.chat-container{contain:layout style;margin:0 auto;max-width:900px}.welcome{align-items:center;animation:fadeIn .6s ease-out;contain:layout style;display:flex;flex:1;flex-direction:column;justify-content:center;min-height:400px;padding:40px;text-align:center}@keyframes fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.welcome-logo{margin-bottom:16px}.welcome-logo-img{border-radius:20px;box-shadow:var(--shadow-lg);height:80px;width:80px}.welcome h1{color:var(--text-primary);font-size:2.5rem;font-weight:700;letter-spacing:-.03em;margin-bottom:8px}.welcome-subtitle{color:var(--text-secondary);font-size:1.1rem;margin-bottom:40px;max-width:600px}.welcome-features{display:grid;gap:20px;grid-template-columns:repeat(3,1fr);max-width:800px;width:100%}.feature{align-items:center;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);cursor:default;display:flex;flex-direction:column;gap:16px;justify-content:center;padding:32px 24px;transition:var(--transition)}.feature,.feature:hover{color:var(--text-primary)}.feature:hover{border-color:var(--text-primary);box-shadow:var(--shadow-md);transform:translateY(-4px)}.feature i{color:var(--text-primary);font-size:32px}.messages{flex:1;min-height:0;overflow-x:hidden;overflow-y:auto;padding:40px 24px 20px;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}.message{animation:slideIn .3s cubic-bezier(.16,1,.3,1);display:flex;gap:24px;margin:0 auto;max-width:800px;padding:24px 0}@keyframes slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.message-avatar{align-items:center;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:50%;color:var(--text-primary);display:flex;height:36px;justify-content:center;min-width:36px;overflow:hidden;width:36px}.message.assistant .message-avatar{background:var(--text-primary);border:none;color:var(--bg-primary)}.message-content{color:var(--text-primary);flex:1;font-size:1rem;line-height:1.75;min-width:0;overflow-wrap:break-word}.message-content p{margin-bottom:1.2em}.message-content p:last-child{margin-bottom:0}.message-content pre{background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:var(--radius-sm);margin:20px 0;overflow-x:auto;padding:20px}.message-content code{background:var(--bg-tertiary);border-radius:4px;font-family:var(--font-mono);font-size:.9em;padding:2px 6px}.message-content pre code{background:transparent;color:var(--text-primary);padding:0}.message-content table{border-collapse:collapse;font-size:.95em;margin:20px 0;width:100%}.message-content table thead{background:var(--bg-secondary)}.message-content table td,.message-content table th{border:1px solid var(--border-color);color:var(--text-primary);padding:12px 16px}.message-content table th{background:var(--bg-secondary);font-weight:600;text-align:left}.message-content table tbody tr{transition:background .15s ease}.message-content table tbody tr:hover{background:var(--bg-hover)}.message-content ol,.message-content ul{margin:1em 0;padding-left:2em}.message-content li{margin-bottom:.5em}.message-content li:last-child{margin-bottom:0}.message-content blockquote{background:var(--bg-secondary);border-left:3px solid var(--text-muted);border-radius:0 var(--radius-sm) var(--radius-sm) 0;color:var(--text-secondary);margin:1em 0;padding:12px 16px}.message-content hr{border:none;border-top:1px solid var(--border-color);margin:2em 0}.message-content a{color:var(--text-primary);text-decoration:underline;text-decoration-color:var(--border-color);text-underline-offset:3px;transition:text-decoration-color .2s}.message-content a:hover{text-decoration-color:var(--text-primary)}.message-content img{border-radius:var(--radius-sm);height:auto;margin:1em 0;max-width:100%}.message-actions{display:flex;gap:4px;margin-top:8px;opacity:0;transition:opacity var(--duration-fast) ease}.message:hover .message-actions{opacity:1}.btn-copy{align-items:center;background:transparent;border:none;border-radius:var(--radius-sm);color:var(--text-muted);cursor:pointer;display:flex;font-size:14px;height:28px;justify-content:center;transition:var(--transition-colors);width:28px}.btn-copy:hover{background:var(--bg-hover);color:var(--text-primary)}.btn-copy.copied{color:var(--success-color)}@media (hover:none){.message-actions{opacity:.6}}.typing-indicator{display:flex;gap:6px;padding:6px 0}.typing-indicator span{animation:bounce 1.4s ease-in-out infinite both;background:var(--text-secondary);border-radius:50%;height:8px;width:8px}.typing-indicator span:first-child{animation-delay:-.32s}.typing-indicator span:nth-child(2){animation-delay:-.16s}@keyframes bounce{0%,80%,to{opacity:.5;transform:scale(0)}40%{opacity:1;transform:scale(1)}}.input-area{background:linear-gradient(to top,var(--bg-primary) 80%,transparent);padding:20px 24px 40px;z-index:5}.input-container-inner{margin:0 auto;max-width:800px;position:relative}.input-toolbar{bottom:16px;display:flex;gap:8px;left:16px;position:absolute;z-index:6}.btn-tool{align-items:center;background:transparent;border:none;border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;display:flex;height:32px;justify-content:center;transition:var(--transition);width:32px}.btn-tool i{font-size:18px}.btn-tool.active,.btn-tool:hover{background:var(--bg-tertiary);color:var(--text-primary)}.rag-toggle{align-items:center;border-radius:var(--radius-sm);color:var(--text-muted);cursor:pointer;display:flex;gap:6px;padding:4px 8px;position:relative;transition:var(--transition);z-index:10;-webkit-touch-callout:none;touch-action:manipulation;-webkit-user-select:none;user-select:none}.rag-toggle:hover{background:var(--bg-tertiary);color:var(--text-secondary)}.rag-toggle.active{color:var(--text-primary)}.rag-slider{background:var(--bg-tertiary);border-radius:7px;display:block;flex-shrink:0;height:14px;min-height:14px;min-width:28px;position:relative;-webkit-transform:translateZ(0);transform:translateZ(0);transition:background .2s ease;width:28px}.rag-toggle.active .rag-slider{background:var(--text-primary)}.rag-slider-handle{background:var(--text-muted);border-radius:50%;display:block;height:10px;left:2px;min-height:10px;min-width:10px;position:absolute;top:2px;-webkit-transform:translateZ(0);transform:translateZ(0);transition:all .2s cubic-bezier(.16,1,.3,1);width:10px}.rag-toggle.active .rag-slider-handle{background:var(--bg-primary);left:16px}.thinking-toggle{align-items:center;border-radius:var(--radius-sm);color:var(--text-muted);cursor:pointer;display:flex;gap:6px;padding:4px 8px;position:relative;transition:var(--transition);z-index:10;-webkit-touch-callout:none;touch-action:manipulation;-webkit-user-select:none;user-select:none}.thinking-toggle:hover{background:var(--bg-tertiary);color:var(--text-secondary)}.thinking-toggle.active{color:var(--text-primary)}.thinking-slider{background:var(--bg-tertiary);border-radius:7px;display:block;flex-shrink:0;height:14px;min-height:14px;min-width:28px;position:relative;-webkit-transform:translateZ(0);transform:translateZ(0);transition:background .2s ease;width:28px}.thinking-toggle.active .thinking-slider{background:var(--text-primary)}.thinking-slider-handle{background:var(--text-muted);border-radius:50%;display:block;height:10px;left:2px;min-height:10px;min-width:10px;position:absolute;top:2px;-webkit-transform:translateZ(0);transform:translateZ(0);transition:all .2s cubic-bezier(.16,1,.3,1);width:10px}.thinking-toggle.active .thinking-slider-handle{background:var(--bg-primary);left:16px}.input-wrapper{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);padding:16px 16px 56px;position:relative;transition:var(--transition)}.input-wrapper:focus-within{background:var(--bg-primary);border-color:var(--border-focus);box-shadow:var(--shadow-md)}.input-wrapper textarea{background:transparent;border:none;color:var(--text-primary);font-family:inherit;font-size:1rem;line-height:1.6;max-height:300px;min-height:24px;outline:none;resize:none;width:100%}.btn-send{align-items:center;background:var(--text-primary);border:none;border-radius:var(--radius-sm);bottom:12px;color:var(--bg-primary);cursor:pointer;display:flex;font-size:20px;height:40px;justify-content:center;position:absolute;right:12px;transition:var(--transition);width:40px}.btn-send:hover:not(:disabled){transform:scale(1.05)}.btn-send:disabled{background:var(--bg-tertiary);color:var(--text-muted);cursor:not-allowed;opacity:.3}.btn-stop{align-items:center;background:var(--error-color);border:none;border-radius:var(--radius-sm);bottom:12px;color:#fff;cursor:pointer;display:flex;font-size:20px;height:40px;justify-content:center;position:absolute;right:12px;transition:var(--transition);width:40px}.btn-stop:hover{background:#dc2626;transform:scale(1.05)}.uploaded-image-preview{animation:fadeIn .2s;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-sm);bottom:60px;left:0;padding:8px;position:absolute}.uploaded-image-preview img{border-radius:4px;height:80px}.url-input-popup{animation:fadeIn .15s ease-out;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);bottom:44px;box-shadow:var(--shadow-lg);left:0;min-width:320px;padding:16px;position:absolute;z-index:100}.url-input-header{color:var(--text-primary);font-size:.9rem;font-weight:600;margin-bottom:12px}.url-input-popup input{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-sm);color:var(--text-primary);font-size:.95rem;outline:none;padding:10px 12px;transition:border-color .2s;width:100%}.url-input-popup input:focus{border-color:var(--border-focus)}.url-input-popup input::placeholder{color:var(--text-muted)}.url-input-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}.url-input-actions .btn-cancel{background:transparent;border:none;border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;font-size:.9rem;padding:8px 16px;transition:var(--transition)}.url-input-actions .btn-cancel:hover{background:var(--bg-hover);color:var(--text-primary)}.url-input-actions .btn-confirm{background:var(--text-primary);border:none;border-radius:var(--radius-sm);color:var(--bg-primary);cursor:pointer;font-size:.9rem;font-weight:500;padding:8px 16px;transition:var(--transition)}.url-input-actions .btn-confirm:hover:not(:disabled){background:var(--accent-hover)}.url-input-actions .btn-confirm:disabled{cursor:not-allowed;opacity:.5}.parsed-url-preview{align-items:center;animation:fadeIn .2s;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-sm);bottom:60px;display:flex;gap:8px;left:0;max-width:300px;padding:8px 12px;position:absolute}.parsed-url-preview i{color:var(--text-secondary);flex-shrink:0;font-size:16px}.parsed-url-title{color:var(--text-primary);font-size:.85rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-remove-url{align-items:center;background:var(--error-color);border:none;border-radius:50%;color:#fff;cursor:pointer;display:flex;flex-shrink:0;font-size:14px;height:20px;justify-content:center;line-height:1;transition:var(--transition);width:20px}.btn-remove-url:hover{background:#dc2626}.attached-doc-preview{align-items:center;animation:fadeIn .2s;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-sm);bottom:60px;display:flex;gap:8px;left:100px;max-width:250px;padding:8px 12px;position:absolute}.attached-doc-preview i{color:var(--text-secondary);flex-shrink:0;font-size:16px}.attached-doc-name{color:var(--text-primary);font-size:.85rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-remove-doc{align-items:center;background:var(--error-color);border:none;border-radius:50%;color:#fff;cursor:pointer;display:flex;flex-shrink:0;font-size:14px;height:20px;justify-content:center;line-height:1;transition:var(--transition);width:20px}.btn-remove-doc:hover{background:#dc2626}.spin{animation:spin 1s linear infinite}.modal-overlay{align-items:center;backdrop-filter:blur(4px);background:rgba(0,0,0,.4);bottom:0;display:flex;justify-content:center;left:0;padding:40px;position:fixed;right:0;top:0;z-index:100;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}.settings-modal{animation:modalScale .25s cubic-bezier(.16,1,.3,1);background:var(--bg-modal);border:1px solid var(--border-color);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;height:700px;max-height:90vh;overflow:hidden;width:900px}@keyframes modalScale{0%{opacity:0;transform:scale(.96)}to{opacity:1;transform:scale(1)}}.settings-nav{background:var(--bg-secondary);border-right:1px solid var(--border-color);display:flex;flex-direction:column;min-width:240px;padding:24px 12px;width:240px}.settings-nav::-webkit-scrollbar{display:none}.settings-nav{-ms-overflow-style:none;scrollbar-width:none}.settings-title{color:var(--text-primary);font-size:1.2rem;font-weight:700;padding:0 12px 24px}.nav-item{align-items:center;border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;display:flex;font-size:.95rem;font-weight:500;gap:12px;margin-bottom:4px;padding:12px 16px;transition:var(--transition-colors)}.nav-item:hover{background:var(--bg-hover);color:var(--text-primary)}.nav-item.active{background:var(--bg-tertiary);color:var(--text-primary);font-weight:600}.settings-footer{color:var(--text-muted);font-size:.75rem;margin-top:auto;padding:12px;text-align:center}.settings-content{display:flex;flex:1;flex-direction:column;overflow:hidden}.settings-scroll-area{flex:1;overflow-x:hidden;overflow-y:auto;padding:40px 48px;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}.section-header{margin-bottom:32px}.section-title{color:var(--text-primary);font-size:1.5rem;font-weight:700;margin-bottom:8px}.section-desc{color:var(--text-secondary);font-size:.95rem}.form-group{margin-bottom:32px}.form-label{color:var(--text-primary);display:block;font-size:.95rem;font-weight:600;margin-bottom:8px}.form-sublabel{color:var(--text-secondary);display:block;font-size:.85rem;margin-bottom:12px}.avatar-img{height:100%;object-fit:cover;width:100%}.file-input-hidden{display:none}.form-group-lg{margin-bottom:40px}.status-success{color:var(--success-color)}.status-error{color:var(--error-color)}.btn-full-width{width:100%}.model-verify-msg{font-size:.85rem;margin-top:10px}.checkbox-group{display:flex;gap:20px;margin-top:8px}.checkbox-label{align-items:center;cursor:pointer;display:flex;font-size:.95rem;gap:8px}.checkbox-label input[type=checkbox]{height:16px;width:16px}.form-sublabel-inline{margin-top:8px}.form-sublabel-block{display:block;margin-bottom:12px}.btn-tool-upload{position:relative;z-index:10}.btn-delete-overlay{align-items:center;background:var(--error-color);border:none;border-radius:50%;color:#fff;cursor:pointer;display:flex;height:24px;justify-content:center;opacity:1;position:absolute;right:-10px;top:-10px;transition:var(--transition);width:24px}.btn-delete-overlay:hover{background:#dc2626}.btn-delete-inline{border:1px solid var(--border-color);flex-shrink:0;height:32px;opacity:1;width:32px}.upload-row{align-items:center;display:flex;flex-wrap:nowrap;gap:12px}.logo-preview-img{border:1px solid var(--border-color);border-radius:var(--radius-sm);flex-shrink:0;height:48px;min-width:48px;object-fit:cover;width:48px}.btn-compact{flex-shrink:0;margin:0;white-space:nowrap}.input-flex{flex:1;min-width:0}.avatars-row{flex-wrap:wrap;gap:24px}.avatar-group,.avatars-row{align-items:center;display:flex}.avatar-group{gap:12px}.avatar-preview-user{background:var(--bg-tertiary)}.avatar-preview-assistant,.avatar-preview-user{align-items:center;border-radius:50%;display:flex;flex-shrink:0;height:40px;justify-content:center;overflow:hidden;width:40px}.avatar-preview-assistant{background:var(--text-primary);color:var(--bg-primary)}.avatar-preview-assistant i{font-size:20px}.settings-footer-link{color:inherit;text-decoration:none}.settings-footer-link:hover{text-decoration:underline}.icon-lg{font-size:24px}.icon-xl{font-size:48px}.plugin-loading-text{color:var(--text-muted);padding:20px;text-align:center}.input-minimal{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-sm);color:var(--text-primary);font-size:1rem;padding:10px 12px;transition:border-color .2s;width:100%}.input-minimal:focus{border-color:var(--border-focus);outline:none}.input-minimal::placeholder{color:var(--text-muted)}.toggle-row{align-items:center;display:flex;justify-content:space-between;padding:8px 0}.toggle-info{flex:1;padding-right:20px}.toggle-switch{appearance:none;-webkit-appearance:none;background:var(--bg-tertiary);border:none;border-radius:99px;cursor:pointer;flex-shrink:0;height:28px;padding:0;position:relative;transition:background .3s;width:48px}.toggle-switch.checked{background:var(--text-primary)}.toggle-handle{background:var(--bg-primary);border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.1);height:24px;left:2px;position:absolute;top:2px;transition:transform .3s cubic-bezier(.16,1,.3,1);width:24px}.toggle-switch.checked .toggle-handle{transform:translateX(20px)}input[type=range]{-webkit-appearance:none;background:var(--bg-tertiary);border-radius:2px;height:4px;outline:none;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:var(--bg-primary);border:2px solid var(--text-primary);border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.1);cursor:pointer;height:20px;transition:transform .1s;width:20px}input[type=range]::-webkit-slider-thumb:hover{transform:scale(1.1)}.collapsible-section{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);overflow:hidden}.collapsible-header{align-items:center;cursor:pointer;display:flex;justify-content:space-between;padding:16px 20px;transition:var(--transition);user-select:none}.collapsible-header:hover{background:var(--bg-hover)}.collapsible-title{align-items:center;color:var(--text-primary);display:flex;font-size:.95rem;font-weight:600;gap:10px}.collapsible-chevron,.collapsible-title i{color:var(--text-secondary)}.collapsible-chevron{transition:transform .2s ease}.collapsible-chevron.expanded{transform:rotate(180deg)}.collapsible-content{border-top:1px solid var(--border-color);padding:0 20px 20px}.collapsible-content .form-sublabel{margin-bottom:12px;margin-top:16px}.system-prompt-textarea{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-sm);color:var(--text-primary);font-family:inherit;font-size:.95rem;line-height:1.6;min-height:100px;padding:12px 14px;resize:vertical;transition:border-color .2s;width:100%}.system-prompt-textarea:focus{border-color:var(--border-focus);outline:none}.system-prompt-textarea::placeholder{color:var(--text-muted)}.model-card{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);margin-bottom:20px;padding:24px;transition:var(--transition)}.model-card:hover{border-color:var(--text-muted)}.model-header{align-items:center;display:flex;justify-content:space-between;margin-bottom:20px}.model-badge{background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:var(--radius-full);color:var(--text-secondary);font-size:.75rem;font-weight:600;padding:4px 10px}.model-badge.active{background:var(--text-primary);border-color:transparent;color:var(--bg-primary)}.modal-actions-bar{background:var(--bg-modal);border-top:1px solid var(--border-color);display:flex;gap:16px;justify-content:flex-end;padding:20px 48px}.btn-secondary{background:transparent;border:1px solid transparent;border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;font-weight:500;padding:10px 24px;transition:var(--transition-colors)}.btn-secondary:hover{background:var(--bg-hover);color:var(--text-primary)}.btn-primary{background:var(--text-primary);border:none;border-radius:var(--radius-sm);color:var(--bg-primary);cursor:pointer;font-weight:600;padding:10px 24px;transition:var(--transition-colors),var(--transition-transform)}.btn-primary:hover{background:var(--accent-hover);transform:translateY(-1px)}.theme-grid{display:grid;gap:20px;grid-template-columns:1fr 1fr}.theme-option{border:2px solid var(--border-color);border-radius:var(--radius-md);cursor:pointer;padding:20px;text-align:center;transition:var(--transition)}.theme-option.active{background:var(--bg-secondary);border-color:var(--text-primary)}.upload-area{background:var(--bg-secondary);border:2px dashed var(--border-color);border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;padding:40px;text-align:center;transition:var(--transition)}.upload-area:hover{background:var(--bg-tertiary);border-color:var(--text-primary);color:var(--text-primary)}.toast{animation:toastPop .3s cubic-bezier(.16,1,.3,1);background:var(--text-primary);border-radius:var(--radius-md);bottom:32px;box-shadow:var(--shadow-lg);color:var(--bg-primary);font-size:.9rem;font-weight:500;left:50%;padding:12px 24px;position:fixed;transform:translateX(-50%);z-index:200}.toast.error{background:var(--error-color);color:#fff}@keyframes toastPop{0%{opacity:0;transform:translate(-50%,20px) scale(.9)}to{opacity:1;transform:translate(-50%) scale(1)}}@media (max-width:768px){body{min-height:100vh;min-height:-webkit-fill-available;min-height:100dvh}.sidebar-overlay{background:rgba(0,0,0,.5);bottom:0;display:block;left:0;opacity:1;position:fixed;right:0;top:0;transition:opacity .3s ease;z-index:99}.sidebar-overlay[style*="display: none"]{opacity:0}.sidebar{bottom:0;box-shadow:5px 0 15px rgba(0,0,0,.2);height:100%;height:-webkit-fill-available;height:100dvh;left:0;padding-top:env(safe-area-inset-top);position:fixed;top:0;transform:translateX(0);z-index:100}.sidebar.collapsed{min-width:280px;transform:translateX(-100%);width:280px}.main-content{height:100%;height:-webkit-fill-available;height:100dvh;min-width:0;width:100%}.chat-container{contain:layout style;height:100%;max-width:100%;padding:0}.mobile-header{align-items:center;background:var(--bg-primary);border-bottom:1px solid var(--border-color);display:flex!important;flex-shrink:0;padding:max(12px,env(safe-area-inset-top)) 16px 12px;position:sticky;top:0;z-index:10}.mobile-title{font-size:1.1rem;font-weight:700;margin-left:12px}.welcome{min-height:300px;padding:20px 16px}.welcome-logo{margin-bottom:12px}.welcome-logo-img{border-radius:16px;height:64px;width:64px}.welcome h1{font-size:1.6rem;margin-bottom:6px}.welcome-subtitle{font-size:.95rem;margin-bottom:24px}.welcome-features{gap:10px;grid-template-columns:1fr;max-width:100%}.feature{flex-direction:row;justify-content:flex-start;padding:16px 14px}.feature i{font-size:24px}.messages{padding:16px 12px;-webkit-overflow-scrolling:touch;contain:layout style;min-height:calc(100vh - 180px);min-height:calc(100dvh - 180px)}.message{gap:12px;max-width:100%;padding:16px 0}.message-avatar{height:32px;min-width:32px;width:32px}.message-content{font-size:.95rem;overflow-wrap:break-word;word-break:break-word}.message-content pre{font-size:.85rem;margin:12px 0;max-width:calc(100vw - 48px);padding:12px}.message-content table{display:block;font-size:.85rem;overflow-x:auto;-webkit-overflow-scrolling:touch}.message-content table tbody td,.message-content table thead th{min-width:80px;padding:10px 12px;white-space:normal}.input-area{padding:12px 12px max(20px,env(safe-area-inset-bottom))}.input-container-inner{max-width:100%}.input-wrapper{border-radius:var(--radius-md);padding:12px 12px 48px}.input-wrapper textarea{font-size:16px!important}.input-toolbar{bottom:12px;left:12px;overflow-x:auto;right:52px;scrollbar-width:none;-ms-overflow-style:none;flex-wrap:nowrap}.input-toolbar::-webkit-scrollbar{display:none}.btn-tool{min-height:44px;min-width:44px}.btn-send,.btn-stop{bottom:10px;font-size:18px;height:44px;right:10px;width:44px}.uploaded-image-preview{bottom:52px}.url-input-popup{left:-12px;min-width:calc(100vw - 48px);right:-12px}.attached-doc-preview,.parsed-url-preview{bottom:52px;max-width:calc(100vw - 100px)}.attached-doc-preview{left:0}.modal-overlay{padding:0}.settings-modal{border-radius:0;flex-direction:column;height:100%;max-height:100%;width:100%}.settings-nav{flex-direction:row;min-width:100%;overflow-x:auto;width:100%;-webkit-overflow-scrolling:touch;border-bottom:1px solid var(--border-color);border-right:none;flex-shrink:0;min-height:auto;padding:max(8px,env(safe-area-inset-top)) 8px 8px;scrollbar-width:none;-ms-overflow-style:none;-webkit-mask-image:linear-gradient(90deg,transparent,#000 16px,#000 calc(100% - 16px),transparent);mask-image:linear-gradient(90deg,transparent,#000 16px,#000 calc(100% - 16px),transparent)}.settings-nav::-webkit-scrollbar{display:none}.settings-footer,.settings-title{display:none}.nav-item{flex-shrink:0;font-size:.9rem;padding:8px 12px;white-space:nowrap}.settings-content{flex:1;min-height:0}.settings-scroll-area{padding:20px 16px max(100px,env(safe-area-inset-bottom) + 80px);-webkit-overflow-scrolling:touch}.section-title{font-size:1.25rem}.modal-actions-bar{padding:16px 16px max(16px,env(safe-area-inset-bottom))}.model-card{padding:16px}.theme-grid{gap:12px}.theme-option{padding:16px}.input-minimal,.input-wrapper textarea,input[type=number],input[type=password],input[type=text],select{font-size:16px!important}.btn-new-chat-collapsed{display:none}.toast{bottom:max(24px,env(safe-area-inset-bottom) + 16px);left:16px;max-width:calc(100% - 32px);right:16px;text-align:center;transform:none}}.mobile-header{display:none}.input-area{padding-bottom:max(40px,env(safe-area-inset-bottom) + 20px)}.sidebar-footer{padding-bottom:max(20px,env(safe-area-inset-bottom) + 20px)}@media (min-width:769px) and (max-width:1024px){.input-container-inner{max-width:100%;padding:0 12px}.input-toolbar{gap:4px}.rag-toggle,.thinking-toggle{min-height:44px;padding:8px 6px;-webkit-tap-highlight-color:rgba(0,0,0,.1)}.rag-slider,.thinking-slider{display:block!important;height:14px;min-height:14px;min-width:28px;-webkit-transform:translateZ(0);width:28px}.rag-slider-handle,.thinking-slider-handle{display:block!important;height:10px;min-height:10px;min-width:10px;-webkit-transform:translateZ(0);width:10px}.btn-tool{min-height:44px;min-width:44px}}@media (max-width:375px){.welcome-logo-img{height:56px;width:56px}.welcome h1{font-size:1.4rem}.welcome-subtitle{font-size:.85rem;margin-bottom:20px}.feature{gap:10px;padding:14px 12px}.message{gap:10px}.message-avatar{height:28px;min-width:28px;width:28px}.input-wrapper{padding:10px 10px 44px}.settings-scroll-area{padding:16px 12px}}@media (max-height:500px) and (max-width:900px){.welcome{padding:16px}.welcome-logo-img{height:48px;width:48px}.welcome h1{font-size:1.4rem;margin-bottom:8px}.welcome-subtitle{margin-bottom:20px}.welcome-features{grid-template-columns:repeat(3,1fr)}.feature{flex-direction:column;gap:8px;padding:12px 8px}}.thinking-block{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);margin-bottom:16px;overflow:hidden}.thinking-header{align-items:center;background:var(--bg-hover);color:var(--text-secondary);cursor:pointer;display:flex;font-size:.85rem;gap:8px;padding:10px 14px;transition:var(--transition);user-select:none}.thinking-header:hover{background:var(--border-color)}.thinking-header i{color:var(--text-muted);flex-shrink:0}.thinking-header .chevron{margin-left:auto;transition:transform .2s ease}.thinking-header .chevron.expanded{transform:rotate(180deg)}.thinking-content{background:var(--bg-primary);border-top:1px solid var(--border-color);color:var(--text-secondary);font-size:.9rem;line-height:1.7;max-height:400px;overflow-y:auto;padding:14px}.thinking-content p{margin-bottom:.8em}.thinking-content p:last-child{margin-bottom:0}.rag-references{border-top:1px solid var(--border-color);margin-top:12px;padding-top:12px}.rag-references-header{align-items:center;background:var(--bg-hover);border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;display:flex;font-size:.85rem;gap:8px;padding:6px 10px;transition:var(--transition);user-select:none}.rag-references-header:hover{background:var(--border-color)}.rag-references-header i{flex-shrink:0}.rag-references-header .chevron{margin-left:auto;transition:transform .2s ease}.rag-references-header .chevron.expanded{transform:rotate(180deg)}.rag-references-list{display:flex;flex-direction:column;gap:10px;margin-top:10px}.rag-reference-item{background:var(--bg-hover);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.85rem;padding:12px}.rag-reference-item .ref-header{align-items:center;display:flex;gap:10px;margin-bottom:8px}.rag-reference-item .ref-badge{background:var(--text-primary);border-radius:10px;color:var(--bg-primary);font-size:.7rem;font-weight:600;padding:2px 8px}.rag-reference-item .ref-score{color:var(--text-muted);font-size:.75rem}.rag-reference-item .ref-content{color:var(--text-secondary);line-height:1.5;word-break:break-word}.btn-plugins{align-items:center;background:transparent;border:none;border-radius:var(--radius-sm);color:var(--text-secondary);cursor:pointer;display:flex;font-size:.95rem;font-weight:500;gap:12px;padding:12px;transition:var(--transition);width:100%}.btn-plugins:hover{background:var(--bg-hover);color:var(--text-primary)}.sidebar-plugins-collapsed{bottom:56px;left:50%;position:absolute;transform:translateX(-50%)}.plugin-modal .settings-content{min-height:400px}.plugin-loading{align-items:center;color:var(--text-secondary);display:flex;flex-direction:column;gap:16px;justify-content:center;padding:60px 20px}.plugin-loading .spinner{animation:spin .8s linear infinite;border:3px solid var(--border-color);border-radius:50%;border-top-color:var(--text-primary);height:32px;width:32px}@keyframes spin{to{transform:rotate(1turn)}}.plugin-error{align-items:center;color:var(--text-muted);display:flex;flex-direction:column;gap:16px;justify-content:center;padding:60px 20px;text-align:center}.plugin-error i{opacity:.5}.plugin-error .btn-secondary{margin-top:8px}.plugin-grid,.plugin-list{display:flex;flex-direction:column;gap:12px}.plugin-list .plugin-card{width:100%}.plugin-list .plugin-desc{display:block;max-width:400px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.plugin-card{align-items:center;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:var(--radius-md);display:flex;flex-direction:row;gap:12px;padding:12px 16px;transition:var(--transition)}.plugin-card:hover{border-color:var(--text-muted)}.plugin-icon{background:var(--bg-hover);border-radius:8px;flex-shrink:0;height:36px;object-fit:cover;width:36px}.plugin-info{display:flex;flex:1;flex-direction:column;gap:2px;min-width:0}.plugin-name{color:var(--text-primary);font-size:.95rem;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.plugin-version{color:var(--text-muted);font-size:.75rem}.plugin-desc{color:var(--text-secondary);font-size:.8rem;line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.plugin-actions{align-items:center;display:flex;flex-shrink:0;gap:8px}.plugin-card.installed .plugin-actions{justify-content:flex-end}.plugin-card .plugin-actions .btn-icon{font-size:1rem;height:36px;width:36px}.btn-sm{font-size:.85rem;padding:6px 16px}.plugin-empty{color:var(--text-muted);grid-column:1/-1;padding:40px 20px;text-align:center}.plugin-upload{align-items:center;border:2px dashed var(--border-color);border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;display:flex;flex-direction:column;gap:12px;justify-content:center;padding:40px;transition:var(--transition)}.plugin-upload:hover{background:var(--bg-hover);border-color:var(--text-muted)}.plugin-upload i{opacity:.5}.plugin-upload-progress{align-items:center;color:var(--text-secondary);display:flex;gap:12px;justify-content:center;padding:20px}.plugin-upload-progress .spinner{animation:spin .8s linear infinite;border:2px solid var(--border-color);border-radius:50%;border-top-color:var(--text-primary);height:20px;width:20px}.plugin-dev-guide{margin-top:24px;text-align:center}.plugin-dev-guide a{align-items:center;color:var(--text-muted);display:inline-flex;font-size:.85rem;gap:6px;text-decoration:none;transition:var(--transition)}.plugin-dev-guide a:hover{color:var(--text-secondary)}.plugin-settings-modal{background:var(--bg-modal);border:1px solid var(--border-color);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;flex-direction:column;max-height:80vh;max-width:500px;width:90%}.plugin-settings-modal.custom-settings-modal{max-width:600px}.plugin-settings-header{border-bottom:1px solid var(--border-color);padding:20px 24px}.plugin-settings-header h3{color:var(--text-primary);font-size:1.1rem;font-weight:600}.plugin-settings-content{flex:1;overflow-y:auto;padding:24px}.plugin-settings-content.custom-settings-content{min-height:0;overflow:hidden;padding:0}.plugin-custom-settings{display:flex;flex:1;flex-direction:column;min-height:0;overflow-y:auto}.plugin-settings-footer{align-items:center;border-top:1px solid var(--border-color);display:flex;gap:12px;padding:16px 24px}.btn-danger{background:var(--error-color);border:none;border-radius:var(--radius-sm);color:#fff;cursor:pointer;font-size:.9rem;padding:8px 16px;transition:var(--transition)}.btn-danger:hover{background:#dc2626}.plugin-no-settings{color:var(--text-muted);padding:40px 20px;text-align:center}.plugin-proxy-settings{border-top:1px solid var(--border-color);margin-top:24px;padding-top:24px}.plugin-proxy-settings h4{color:var(--text-primary);font-size:.95rem;font-weight:600;margin-bottom:16px}.plugin-toolbar-area{align-items:center;display:flex;gap:4px}.plugin-toolbar-divider{background:var(--border-color);height:20px;margin:0 4px;width:1px}.btn-tool.plugin-btn.active{background:var(--text-primary);color:var(--bg-primary)}.btn-tool.plugin-btn.active:hover{background:var(--accent-hover);color:var(--bg-primary)}.btn-tool.plugin-btn.loading{opacity:.7;pointer-events:none}.plugin-more-dropdown{position:relative}.plugin-more-menu{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-md);bottom:100%;box-shadow:var(--shadow-lg);margin-bottom:8px;max-height:280px;min-width:180px;overflow-y:auto;position:absolute;right:0;z-index:100}.plugin-more-item{align-items:center;color:var(--text-secondary);cursor:pointer;display:flex;font-size:.9rem;gap:10px;padding:12px 16px;transition:background .15s}.plugin-more-item:first-child{border-radius:var(--radius-md) var(--radius-md) 0 0}.plugin-more-item:last-child{border-radius:0 0 var(--radius-md) var(--radius-md)}.plugin-more-item:hover{background:var(--bg-hover);color:var(--text-primary)}.plugin-more-item.active{background:var(--bg-secondary);color:var(--text-primary)}.plugin-more-item.loading{opacity:.7;pointer-events:none}.plugin-more-item i{flex-shrink:0;font-size:16px;text-align:center;width:20px}.plugin-more-item span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.plugin-fullscreen-modal{z-index:1000}.plugin-fullscreen-content{background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);max-height:90vh;max-width:900px;overflow:hidden;width:100%}@media (max-width:768px){.plugin-toolbar-area{gap:2px}.plugin-toolbar-divider{margin:0 2px}.plugin-fullscreen-content{border:none;border-radius:0;max-height:100%;max-width:100%}.plugin-more-menu{left:50%;min-width:200px;right:auto;transform:translateX(-50%)}}@media (min-width:769px) and (max-width:1024px){.btn-tool.plugin-btn{min-height:44px;min-width:44px}}@media (hover:none){.feature:hover{border-color:var(--border-color);box-shadow:none;transform:none}.btn-new-chat:hover{box-shadow:var(--shadow-sm);transform:none}.btn-primary:hover{opacity:1;transform:none}.btn-send:hover:not(:disabled),.btn-stop:hover{transform:none}.chat-item:hover .btn-delete{opacity:1}.model-card:hover{border-color:var(--border-color)}}